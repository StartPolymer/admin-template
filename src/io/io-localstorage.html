<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../behaviors/common-behavior.html">

<dom-module id="io-localstorage">
<template>

<iron-localstorage
    name="[[config.appId]]-authToken"
    value="{{app.authToken}}"></iron-localstorage>

<iron-localstorage
    name="[[config.appId]]-defaultUrl"
    value="{{app.defaultUrl}}"
    on-iron-localstorage-load-empty="_setDefaultDefaultUrl"></iron-localstorage>

<iron-localstorage
    name="[[config.appId]]-isSignedIn"
    value="{{app.isSignedIn}}"
    on-iron-localstorage-load-empty="_setDefaultIsSignedIn"></iron-localstorage>

<iron-localstorage
    name="[[config.appId]]-redirectTo"
    value="{{app.redirectTo}}"></iron-localstorage>

<iron-localstorage
    name="[[config.appId]]-referralId"
    value="{{app.referralId}}"></iron-localstorage>

<iron-localstorage
    name="[[config.appId]]-userProfile"
    value="{{app.userProfile}}"></iron-localstorage>

</template>
<script>

Polymer({

  is: 'io-localstorage',

  behaviors: [
    AppBehaviors.CommonBehavior
  ],

  // Initialize default storage if nothing has been stored
  _setDefaultDefaultUrl: function() {
    this.set('app.defaultUrl', window.Config.baseUrl);
  },

  _setDefaultIsSignedIn: function() {
    this.set('app.isSignedIn', false);
  }

});

</script>
</dom-module>
